{% extends 'layout.html' %}
{% block main %}

<!-- Bootstrap JS and other dependencies -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>

<!--Heading + explanation -->
<section class="jumbotron text-center">
  <div class="container">
    <h1 class="jumbotron-heading">Photos</h1>
    <p class="lead">The photos below have been taken by NASA's rovers on Mars, Curiosity and Perseverance.</p>
  </div>
</section>


<!-- Perseverance Carousel -->
<div class="container my-5">
  <h2>Perseverance Photos</h2>
  <p>These photos were taken by Perseverance on {{perseverance_max}}</p>
  <div id="perseveranceCarousel" class="carousel slide" data-interval="false">
    <div class="carousel-inner">
      {% for i in perseverance_photos | batch(3) %}
      <div class="carousel-item {% if loop.first %}active{% endif %}">
        <div class="row">
          {% for photo in i %}
          <div class="col-md-4 col-sm-12">
            <img src="{{ photo['image'] }}" class="d-block w-100 resizable-image" alt="Perseverance Photo">
          </div>
          {% endfor %}
        </div>
      </div>
      {% endfor %}
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#perseveranceCarousel" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#perseveranceCarousel" data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </button>
  </div>
</div>

<!-- Curiosity Carousel -->
<div class="container my-5">
  <h2>Curiosity Photos</h2>
  <p>These photos were taken by Curiosity on {{curiosity_max}}</p>
  <div id="curiosityCarousel" class="carousel slide" data-interval="false">
    <div class="carousel-inner">
      {% for i in curiosity_photos | batch(3) %}
      <div class="carousel-item {% if loop.first %}active{% endif %}">
        <div class="row">
          {% for photo in i %}
          <div class="col-md-4 col-sm-12">
            <img src="{{ photo['image'] }}" class="d-block w-100 resizable-image" alt="Curiosity Photo" >
          </div>
          {% endfor %}
        </div>
      </div>
      {% endfor %}
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#curiosityCarousel" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#curiosityCarousel" data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </button>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const isMobile = window.matchMedia("(max-width: 768px)").matches;

    if (isMobile) {
      // Handle Perseverance Carousel
      const perseveranceInner = document.querySelector("#perseveranceCarousel .carousel-inner");
      const perseverancePhotos = [...perseveranceInner.querySelectorAll("img")];
      perseveranceInner.innerHTML = ""; // Clear existing slides

      perseverancePhotos.forEach((photo, index) => {
        const item = document.createElement("div");
        item.className = `carousel-item ${index === 0 ? "active" : ""}`;
        
        const col = document.createElement("div");
        col.className = "col-12";

        col.appendChild(photo);
        item.appendChild(col);

        perseveranceInner.appendChild(item);
      });

      // Handle Curiosity Carousel
      const curiosityInner = document.querySelector("#curiosityCarousel .carousel-inner");
      const curiosityPhotos = [...curiosityInner.querySelectorAll("img")];
      curiosityInner.innerHTML = ""; // Clear existing slides

      curiosityPhotos.forEach((photo, index) => {
        const item = document.createElement("div");
        item.className = `carousel-item ${index === 0 ? "active" : ""}`;
        
        const col = document.createElement("div");
        col.className = "col-12";

        col.appendChild(photo);
        item.appendChild(col);

        curiosityInner.appendChild(item);
      });
    }
  });
</script>



</body>



{% endblock %}
